if (self.CavalryLogger) { CavalryLogger.start_js(["HtEH+"]); }

__d("AlbumFeedGridSwitcher",["cx","Arbiter","CSS","Event","PageTransitions","ReactComposerEvents","Run","SimpleNUXMessage","SimpleNUXMessageTypes","SubscriptionsHandler","URI","ge"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=7;a=function(){__p&&__p();function a(a,c,d,e){__p&&__p();var f=this;this.$6=function(a){var c=b("URI").getRequestURI(!1).getQueryData();if(c.needsRefresh==="true"&&a.getQueryData().feed!==c.feed||!Object.prototype.hasOwnProperty.call(a.getQueryData(),"feed")&&!Object.prototype.hasOwnProperty.call(a.getQueryData(),"needsRefresh")){Object.prototype.hasOwnProperty.call(a.getQueryData(),"theater")&&b("Arbiter").subscribeOnce("PhotoSnowlift.CLOSE",function(){return b("PageTransitions").registerHandler(f.$6,h)});return!1}b("PageTransitions").transitionComplete();return!0};this.activateFeedView=function(){b("URI").getMostRecentURI().getQueryData().needsRefresh!=="true"&&(b("CSS").addClass(b("ge")("album_photos_pagelet"),"hidden_elem"),b("CSS").removeClass(f.$3,"_aqp"),b("CSS").removeClass(b("ge")("album_feed_pagelet"),"hidden_elem"),b("CSS").addClass(f.$2,"_aqp"),b("CSS").addClass(b("ge")("album_feedback_pagelet"),"hidden_elem"),b("CSS").addClass(b("ge")("shared_album_nux"),"hidden_elem")),f.updateFeedURI("true")};this.activateGridView=function(){b("URI").getMostRecentURI().getQueryData().needsRefresh!=="true"&&(b("CSS").addClass(b("ge")("album_feed_pagelet"),"hidden_elem"),b("CSS").removeClass(f.$2,"_aqp"),b("CSS").removeClass(b("ge")("album_photos_pagelet"),"hidden_elem"),b("CSS").addClass(f.$3,"_aqp"),b("CSS").removeClass(b("ge")("album_feedback_pagelet"),"hidden_elem"),b("CSS").removeClass(b("ge")("shared_album_nux"),"hidden_elem")),f.updateFeedURI("false")};this.$1=a;this.$2=c;this.$3=d;this.$4=e;this.$5=new(b("SubscriptionsHandler"))();this.$5.addSubscriptions(b("Event").listen(this.$2,"click",this.activateFeedView),b("Event").listen(this.$3,"click",this.activateGridView));this.$2.removeAttribute("disabled");this.$3.removeAttribute("disabled");b("CSS").removeClass(this.$3,"_42fr");b("CSS").removeClass(this.$2,"_42fr");b("Arbiter").subscribeOnce(b("ReactComposerEvents").POST_FINALLY,function(){var a=b("URI").getMostRecentURI(),c=a.getQueryData();c.needsRefresh="true";a.setQueryData(c);b("PageTransitions").go(a)});this.$4&&(this.$4.subscribe("hide",function(){b("SimpleNUXMessage").markMessageSeenByUser(b("SimpleNUXMessageTypes").ALBUMSV2_FEED_VIEW_SWITCHER)}),this.$4&&this.$4.show());b("Run").onLeave(this.cleanUp.bind(this));b("PageTransitions").registerHandler(this.$6,h);a=b("URI").getRequestURI(!1);c=a.getQueryData();c.needsRefresh&&(delete c.needsRefresh,b("PageTransitions").go(a.setQueryData(c)))}var c=a.prototype;c.cleanUp=function(){this.$5&&this.$5.release(),b("PageTransitions").removeHandler(this.$6)};c.updateFeedURI=function(a){var c=b("URI").getMostRecentURI(),d=c.getQueryData();d.feed=a;c.setQueryData(d);b("PageTransitions").go(c)};return a}();e.exports=a}),null);
__d("ScrollLoader",["AsyncRequest","OnVisible"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";function a(a,c,d,e){this.$1=new(b("OnVisible"))(a,function(){new(b("AsyncRequest"))(c).setRelativeTo(a).send()},d,e)}var c=a.prototype;c.destroy=function(){this.$1.remove(),this.$1=null};return a}();e.exports=a}),null);